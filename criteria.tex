%!TEX root = main.tex

\section{Quality Criteria for SKOS Vocabularies}\label{sec:criteria}

% Briefly describe methodology

We identified an initial set of quality criteria for SKOS vocabularies by reviewing existing literature and manually examining existing vocabularies. We published our findings online\footnote{\url{https://github.com/cmader/qSKOS/wiki/Quality-Criteria-for-SKOS-Vocabularies}} and requested feedback from experts via public mailing list and informal face to face discussions. Based on the received responses, we then selected a subset of these criteria and formalized them into computable \textbf{quality checking functions}. Each function operates on a SKOS vocabulary, which we define, for the purpose of this work, as follows:

\begin{definition}[SKOS Vocabulary] Let a SKOS vocabulary be a tuple of the form $V = \langle IR, C, SR, ULV \rangle$, with \(IR = I_{CEXT}(\texttt{rdfs:Resource}^\mathcal{I})\) being the set of \textbf{resources}, \(C = I_{CEXT}(\texttt{skos:Concept}^\mathcal{I})\) being the set of \textbf{conceptual resources}, \(SR = I_{EXT}(\texttt{skos:semanticRelation}^\mathcal{I})\) being the set of \textbf{semantic relations} associating conceptual resources with one another, and $ULV \subseteq I_{CEXT}(\texttt{rdfs:Literal}^\mathcal{I})$ being the set of \textbf{untyped literal values}. Further, we let $V$ be the fully entailed RDFS interpretation~\cite{RDFSEM2012} of the underlying RDF graph, enriched by entailment of \texttt{owl:inverseOf} properties. 

\end{definition}

% @CM Are you sure about the term "untyped literal"? The RDF spec talkes about
% plain literals

The commonality of all quality checking functions is that they take a given SKOS vocabulary as input and return a (nested) set, containing the resources \todo{CM}{fulfill the quality criterion?}. Therefore, we can formalize a quality criterion as being an abstract quality checking function $f:V \rightarrow \mathcal{P}(IR)$, mapping a given vocabulary $v \in V$ to the powerset of its resources. Each quality criterion we found can be implemented as a realization of such an abstract filtering function, possibly with additional parameters. Statistical analysis can be computed on top of the return values.\todo{CM}{the term criterion still sounds strange. We must somehow clarify what passing/failing a criterion means there.}

% Structure for each criterion description
%- origin (refs) and design rationale
%- formal definition that specifies how to compute the metric

In the following, we explain the origins and design rationale for each quality criterion (QC) and describe how we implemented the corresponding quality checking function. For better readability we provide semi-formal definitions only where necessary and refer to the online documentation and the implementation source code for further details. We also categorized the identified quality criteria into \emph{Labeling and Documentation Criteria}, \emph{Structural Criteria}, \emph{Linked Data Specific Criteria}, and \emph{Other Criteria}. 

\todo{All}{decide for either using the term "concept" or "conceptual resource"}

% LEXICAL AND DOCUMENTATION CRITERIA

\subsection{Labeling and Documentation Criteria}

The criteria defined in this section primarily focus on supporting interaction with human users that either work with the vocabulary itself or interact with a system using the vocabulary for, e.g., search and retrieval purposes.

\paragraph{QC 1: Omitted or Invalid Language Tags}

SKOS defines a set of properties that link resources with RDF Literals, which are plain text natural language strings with an optional language tag. This includes the labeling properties \texttt{skos:prefLabel}, \texttt{skos:altLabel}, \texttt{skos:hiddenLabel} and also SKOS documentation properties, such as \texttt{skos:note} and subproperties thereof. Since omitting language tags or using non-standardized, private language tags in a SKOS vocabulary could limit language-dependent structural queries, we check a SKOS vocabulary for omitted language tags. We iterate over all resources in $IR$ and collect those that have relations to plain literals with missing or invalid language tags, hence tags that are not defined in RFC3066\footnote{RFC 3066: Tags for the Identification of Languages \url{http://www.ietf.org/rfc/rfc3066.txt}}.

% This is implementation specific; let's stay with high-level descriptions of the algorithms
%We delegate validity checking of language tags to methods provided by the by the OpenRDF\footnote{\url{http://www.openrdf.org/}} framework that in turn checks for conformance with RFC3066\footnote{\url{http://www.ietf.org/rfc/rfc3066.txt}}.\todo{CM}{is there any literature reference for this criterion?}

\paragraph{QC 2: Incomplete Language Coverage}

A SKOS vocabulary that uses language tags with its literal values should apply them consistently for all concepts. Hence, the set of language tags used by the literal values linked with a concept should be the same for all concepts. This is particularly important for applications that rely on internationalization and translation use cases. We calculate the affected concepts by extracting the global set of language tags used in a vocabulary from all literal values attached to all concepts in $C$. In a second pass we again iterate over this set of concepts and identify all conceptual resources having a set of language tags that is not equal to the global language set. \todo{CM}{literature reference?}

\paragraph{QC 3: Undocumented Concepts}

\cite{Svenonius1997} advocates the ``inclusion of as much definition material as possible''. The SKOS language specification defines various properties that are intended to hold this kind of information, subsumed as ``documentation properties''~\cite{SkosReference2008}. To identify all undocumented concepts, we iterate over all concepts in $C$ and collect those that do not use any of these documentation properties.

\paragraph{QC 4: Label Conflicts}

This criterion is an extension of a statement from \cite{Isaac2009} that recommends that ``no two concepts have the same preferred lexical label in a given language when they belong to the same concept scheme''. Based on our review of existing vocabularies, we could observe that (i) many vocabularies don’t use concept schemes and (ii) identical \texttt{skos:altLabels} or \texttt{skos:hiddenLabels} can also negatively affect use cases such as auto-completion, which proposes labels based on the user input. Thus, this criterion generalizes this statement by finding all concept pairs with their respective \texttt{skos:prefLabel}, \texttt{skos:altLabel} or \texttt{skos:hiddenLabel} property values meeting a certain similarity threshold defined by a function $sim:ULV \times ULV \rightarrow [0,1]$. The default, built-in similarity function checks for case-insensitive string equality with a threshold equal to 1. This criterion is calculated by iterating over all pairs of concepts, i.e., elements of $C \times C$, applying $sim$ to every possible label combination, and collecting those pairs for which $sim$ meets or exceeds a specified threshold.  

% STRUCTURAL METRICS

\subsection{Structural Criteria}

The commonality of the following metrics is that they identify possible weaknesses when $V$ is used in scenarios exploiting the structure of its RDF graph. 

\subsubsection{Loose Concepts} is a criterion motivated by the notion of ``orphan terms'' in the literature~\cite{Hedden2010}, which are are terms without any associative or hierarchical relationships. Checking for them is common in existing thesaurus development applications and also suggested by \cite{Z39.19:2005}. When we apply this to SKOS vocabularies, a loose concept is a concept that has no semantic relations with other conceptual resources and thus do not occur in any of the pairs yielded by $SR$. Although they might have attached lexical labels, they lack valuable context information that is considered essential for, e.g., search query expansion. Calculation can be done by iterating over all elements in $C$, filtering those not having a semantic relation to any other conceptual resource. 

% \begin{definition}
% Let \(G_{lc} = (C, SR)\) and \(deg(c)\) be the degree, hence the number of in- and outgoing edges, of a node $c \in C$ in the graph $G_{lc}$. We can then define loose concepts as a function \(lc : G \rightarrow \mathbb{N}_{0}\), with \[lc(g) = \left|\left\{c \in C : deg(c) = 0\right\}\right|\]
% \end{definition}

\subsubsection{Weakly Connected Components} indicate that the vocabulary is split into separate ``clusters''. Presence of several WCC might be caused by incomplete data acquisition, ``forgotten'' test data, outdated terms, accidental deletion of relations and the like. In a practical setting, existence of weakly connected components could render the vocabulary less suitable for operations that rely on navigating a connected vocabulary structure, such as query expansion or suggestion of related terms. To calculate WCC, we create an undirected graph whose set of nodes constitutes all non-loose concepts and whose edges are defined by $SR$. We then utilize ``Tarjan’s algorithm''\cite{Hopcroft1973} that finds all connected components of the graph, i.e. all sets of conceptual resources that can reach each other by a path of semantic relations.

% \begin{definition}
% To evaluate this criterion we consider a graph \(G_{wcc} = (C - lc(G_{lc}), SR)\). The function \(components(g) : G \rightarrow  \mathfrak{P}(G)\) calculates all weakly connected components of a graph by replacing all directed edges by undirected edges and utilizing “Tarjan’s algorithm” \cite{Hopcroft1973}. Based on that function, we can express this criterion as a function \(wcc : G \rightarrow \mathbb{N}_{0}\), with \[wcc(g) = \left|components(g)\right|\]
% \end{definition}
 

\subsubsection{Cyclic Hierarchical Relations} have been mentioned numerous times in thesaurus development literature. \cite{Soergel2002} suggests a ``check for hierarchy cycles" since they ``throw the program for a loop in the generation of a complete hierarchical structure''. However, SKOS does not define a formal constraint regarding hierarchy cycles but \cite{SkosReference2008} mentions them as potential problems. The SKOS documentation also does not state, how exactly hierarchical relationships are to be interpreted. There exist common forms like, e.g., ``generic-specific'', ``instance-of'' or ``whole-part'' \cite{Hedden2010,Harpring2010,Aitchison2000} where cycles would be considered a logical contradiction. To calculate this criterion, we construct two graphs, with the set of nodes being $C$. The edges in one graph only point towards the broader concepts, the edges of the other graph towards the narrower concepts. For each graph we now identify those nodes that are part of a cycle and return the set of strongly connected components they are contained in.

%Erkärung: ein knoten (konzept) liegt oft in vielen überlappenden kreisen und es würde keinen sinn machen, diese alle auszugeben. deshalb berechne ich mir von jedem knoten der in einem kreis liegt, in welcher starken zusammenhangskomponente er liegt. das sind dann per definition alle knoten, die mit irgendeinem kreis in dem das konzept liegt was zu tun haben, weil eine starke zusammenhangskomponente ja eigentlich nur aus kreisen besteht (von jedem knoten gibt es einen gerichteten weg zu jedem anderen knoten)
 
% \begin{definition}
% Let \(H_{br} \subseteq SR\) be the set of pairs of hierarchically broader related resources, i.e. \(I_{EXT}(\texttt{skos:broader}^\mathcal{I}) \cup I_{EXT}(\texttt{skos:broaderTransitive}^\mathcal{I}) \cup I_{EXT}(\texttt{skos:broadMatch}^\mathcal{I})\). \(H_{br}\) also includes the extensions of the respecitive inverse properties with each pair in reverse order. Likewise, \(H_{nar} \subseteq SR\) can be defined as the set of hierarchically narrower related resources. We consider two graphs \(G_{br} = (C,H_{br})\) and \(G_{nar}=(C,H_{nar})\) and a function \(cycleNodes:G \rightarrow \mathfrak{P}(C)\) identifying all nodes in a graph, that are part of a cycle. Furthermore we consider a function \(stronglyConnectedSets: G \rightarrow \mathfrak{P}(C)\) that calculates all sets of nodes contained in a strongly connected subgraph of $G$. This criterion can be defined as a function \(chr:G \rightarrow \mathbb{N}_{0}\) with \[chr(g)=\left|\left\{s \in stronglyConnectedSets(g) : cn \in cycleNodes(g), cn \in s\right\}\right|\]
% \end{definition}


\subsubsection{Valueless Associative Relations}
The ISO/DIS 25964-1 standard suggests that terms that share a common broader term but don’t have an overlapping meaning, should not be related associatively. This is also advocated by \cite{Hedden2010} and \cite{Aitchison2000} who also mentions ``the risk that thesaurus compilers may overload the thesaurus with valueless relationships'', having a negative effect on precision. This criterion identifies a set of pairs of conceptual resources that share the same broader or narrower concept while also being associatively related, i.e. all pairs in $I_{EXT}(\texttt{skos:related}^\mathcal{I})$ that contain both of these conceptual resources.

\subsubsection{Solely Transitively Related Concepts}
Two concepts are related using only transitive hierarchical relations which are, according to \cite{SkosReference2008}, ``not used to make assertions''. Transitive hierarchical relations in SKOS are meant to be infered by the vocabulary user, which is reflected in the SKOS schema by, e.g., \texttt{broader} being a subproperty of \texttt{broaderTransitive}. This criterion identifies the set $I_{EXT}(\texttt{skos:broaderTransitive}^\mathcal{I}) \cup I_{EXT}(\texttt{skos:narrowerTransitive}^\mathcal{I})$ \textbf{without} RDFS subproperty entailment.

\subsubsection{Omitted Top Concepts}
The SKOS language provides ConceptSchemes which are a facility for grouping related concepts. In order to provide entry points to such a group of concepts, one or more concepts can be marked as top concepts. This helps to provide ``efficient access''~\cite{Isaac2009} and simplifies orientation in the vocabulary. To calculate this criterion, we identify all ConceptSchemes $I_{CEXT}(\texttt{skos:ConceptScheme}^\mathcal{I})$ not contained in any of the pairs in $I_{EXT}(\texttt{skos:hasTopConcept}^\mathcal{I})$.

%Thus, this criterion returns the subset of $C$ whose elements are not contained in any of the pairs obtained by $I_{EXT}(\texttt{skos:hasTopConcept}^\mathcal{I})$.

\subsubsection{Top Concept Having Broader Concepts}
\cite{Allemang2011} proposes to ``not indicate any concepts internal to the tree as top concepts'', i. e. top concepts should not have broader concepts. This criteria identifies all elements from $C$ that occur in both $I_{EXT}(\texttt{skos:topConceptOf}^\mathcal{I})$ and as first element of each pair from $I_{EXT}(\texttt{skos:broader}^\mathcal{I})$.

% LINKED-DATA SPECIFIC CRITERIA

\subsection{Linked Data Specific Criteria}

This section identifies criteria related to a vocabulary's interaction with other datasets in the LOD cloud.

\subsubsection{Missing In-Links}
A periodically updated version of a diagram visualizing ``the data sets in the LOD cloud as well as their interlinkage relationships'' is publised online\footnote{\url{http://www4.wiwiss.fu-berlin.de/lodcloud/state/}}. In these diagrams, dbpedia is shown as the most intensely linked resource, i.e. a large number of vocabularies link to resources in that dataset. Therefore a dataset with a large number of other datasets referencing it, can be assumed to be of great value for the community. Accordingly, estimating the number of In-Links of SKOS concepts defined in a vocabulary (henceforth called the in-degree of a concept) would give some hint about how established or accepted a controlled vocabulary is. A method to carry out these estimations would be utilizing existing Linked Data indices like, e.g., Sindice\footnote{\url{http://sindice.com/}} that provide a SPARQL endpoint. In order to estimate the number of In-Links for a conceptual resource, we iterate over all elements in $C$ and query the Sindice SPARQL endpoint for triples containing the concept's URI in the object part. Those concepts having an empty query result, are missing any In-Links and are thus included in the result set of this criterion.

\subsubsection{Missing Out-Links}
The Web of Data consists of globally interconnected datasets, ``enabling seamless connections between data sets''\cite{Heath2011}. These links can be established between various SKOS vocabularies by Out-Links, i.e., references from conceptual resources in the ``source vocabulary'' $V$ to resources identified by an HTTP URI and available at a different host. Similar to the criterion above, this criterion identifies the set of all conceptual resources that lack such Out-Links. Calculation of the result set is done by iterating over all elements $c \in C$ and investigating the host part of all related resources. If none of these host names differs from the host part of $c$, it has no Out-Links and is thus included into the resources identified by this criterion.

%\subsubsection{HTTP URI Schema Violation}\todo{All}{We don't have any evidence this really happens in existing vocabularies, although it is very likely. Maybe we should skip this.}

\subsubsection{Link Target Unavailability}
This criterion identifies a set of all resources that have been identified as unavailable, i.e. resolving their URI leads to an erroneous HTTP response or no response at all. An erroneous HTTP response in that case can be defined as a response code (after a possible redirection) other than 200. Just as in the ``traditional'' Web, these ``broken links'' hinder information gathering and should be avoided. Calculation of this criterion is performed by iterating over all resources in $IR$, performing an HTTP request and include those resources in the result set that are unavailable.

% OTHER CRITERIA

\subsection{Other Criteria}

\subsubsection{Undefined SKOS Resource Usage}
Some vocabularies reference resources in the SKOS namespace that cannot be resolved. A common reason for this is, that there seems to exist a misunderstanding about the correct way of introducing new classes or properties in an OWL document. In some cases, vocabularies ``invent'' new terms in the SKOS namespace in order to meet certain requirements of the publishing organizations that cannot (yet) be expressed within the SKOS schema. Another reason for the presence of unresolvable resource references in the SKOS namespace is that the vocabulary might be outdated. With the SKOS W3C recommendation maturing, some properties have been removed from the current version of the schema. Vocabularies using these ``deprecated'' properties hence contain parts of their information in a non ``standard"-compliant way, having negative effects when, e.g., crawling vocabularies to gather specific information. A method to identify these undefined SKOS resources is to iterate over all resources in $IR$, including (i) those resources in the resulting set that are contained in the list of deprecated resources or (ii) have an URI in the SKOS namespace but are not defined in the SKOS ontology. 

